document.addEventListener("DOMContentLoaded",(()=>{let e=document.querySelector("#bannersubscribeform");if(null!==e){const n=document.querySelector("#bannersubscribeform button");var t=document.createElement("div");t.setAttribute("class","alert"),t.setAttribute("aria-live","assertive"),t.setAttribute("aria-atomic","true"),e.appendChild(t),e.onsubmit=async r=>{if(r.preventDefault(),e.elements.snarefortheunwary.value)return;const i=new FormData(e),s=i.get("email").trim();if(!s)return o("Please enter your email address","Not sent"),t.addEventListener("click",a),void t.addEventListener("keydown",a);if(!function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}(s))return o("Please enter a valid email address","Not sent"),t.addEventListener("click",a),void t.addEventListener("keydown",a);n.disabled=!0,n.textContent="Sending ...";try{(await fetch("https://sc8pprwk2k.execute-api.eu-west-2.amazonaws.com/dev/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(i))})).ok?o("Thanks for subscribing to The Exeter Digest: the next edition will be with you soon","Sent"):o("There was a problem submitting your email address: please try again","Not sent")}catch(e){console.error("Error submitting form:",e)}function o(e,r){t.innerHTML=`<div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path stroke-width="1" d="M16,16 L4,4"/><path stroke-width="1" d="M16,4 L4,16"/></svg><p>${e}</p></div>`,t.setAttribute("role","button"),t.setAttribute("tabindex","0"),t.focus(),n.disabled=!0,n.textContent=`${r}`}function a(e){"click"!==e.type&&("keydown"!==e.type||"Enter"!==e.key&&" "!==e.key)||(t.innerHTML="",n.disabled=!1,n.textContent="Subscribe free",t.removeEventListener("click",a),t.removeEventListener("keydown",a))}function d(r){"click"!==r.type&&("keydown"!==r.type||"Enter"!==r.key&&" "!==r.key)||(t.innerHTML="",n.disabled=!1,n.textContent="Subscribe free",e.reset(),t.removeEventListener("click",d),t.removeEventListener("keydown",d))}t.addEventListener("click",d),t.addEventListener("keydown",d)}}let n=document.querySelector("#insertsubscribeform");if(null!==n){const e=document.querySelector("#insertsubscribeform button");var r=document.createElement("div");r.setAttribute("class","alert"),r.setAttribute("aria-live","assertive"),r.setAttribute("aria-atomic","true"),n.appendChild(r),n.onsubmit=async t=>{if(t.preventDefault(),n.elements.snarefortheunwary.value)return;const i=new FormData(n),s=i.get("email").trim();if(!s)return o("Please enter your email address","Not sent"),r.addEventListener("click",a),void r.addEventListener("keydown",a);if(!function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}(s))return o("Please enter a valid email address","Not sent"),r.addEventListener("click",a),void r.addEventListener("keydown",a);e.disabled=!0,e.textContent="Sending ...";try{(await fetch("https://sc8pprwk2k.execute-api.eu-west-2.amazonaws.com/dev/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(i))})).ok?o("Thanks for subscribing to The Exeter Digest: the next edition will be with you soon","Sent"):o("There was a problem submitting your email address: please try again","Not sent")}catch(e){console.error("Error submitting form:",e)}function o(t,n){r.innerHTML=`<div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path stroke-width="1" d="M16,16 L4,4"/><path stroke-width="1" d="M16,4 L4,16"/></svg><p>${t}</p></div>`,r.setAttribute("role","button"),r.setAttribute("tabindex","0"),r.focus(),e.disabled=!0,e.textContent=`${n}`}function a(t){"click"!==t.type&&("keydown"!==t.type||"Enter"!==t.key&&" "!==t.key)||(r.innerHTML="",e.disabled=!1,e.textContent="Subscribe free",r.removeEventListener("click",a),r.removeEventListener("keydown",a))}function d(t){"click"!==t.type&&("keydown"!==t.type||"Enter"!==t.key&&" "!==t.key)||(r.innerHTML="",e.disabled=!1,e.textContent="Subscribe free",n.reset(),r.removeEventListener("click",d),r.removeEventListener("keydown",d))}r.addEventListener("click",d),r.addEventListener("keydown",d)}}}));